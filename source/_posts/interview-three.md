---
title: 面经总结(3)
date: 2023-5-11 11:09
categories: 面试
---
# 1、vue3性能提升主要体现在哪些方面

## (1)响应式系统

- vue2

  基于Object.defineProperty()来进行数据接触，然后深度遍历每个属性，给每个属性添加getter和setter方法

- vue3

  使用Proxy(代理)对象重写响应式系统

  - 可以监听动态新增的属性
  - 可以监听删除的属性
  - 可以监听数组的索引和length属性

  实现原理就是用Proxy拦截对象中任意属性的变化，再通过Reflect对源对象属性进行操作

## (2)编译阶段

- vue2

  通过标记静态节点优化diff的过程

- vue3

  - 标记和提升所有的静态节点，diff的时候只需要对比动态节点的内容
  - Fragment：template中不需要唯一根节点，可以直接放文本或者同级标签
  - 静态提升，当使用hoisStatic时，所有静态的节点都会被提升到render方法之外，只会在应用启动的时候被创建一次，之后使用只需要应用提取的静态节点，随着每次的渲染被不停的复用
  - patch flag，在动态标签末尾加上相应的标记，只能带patchFlag的节点才被认为是动态的元素，会被追踪属性的修改，能快速的找到动态节点，而不用逐个逐层遍历，提高了虚拟dom diff算法的性能
  - 缓存事件处理函数cacheHandler，避免每次触发都要重新生成全新的function去更新之前的函数

## (3)源码体积

- 相比Vue2，vue3整体体积变小了，移除了一些不常用的API

- tree shanking
  - 任何一个函数，如ref，reavtived，computed等，仅仅在用到的时候才打包
  - 通过编译阶段的静态分析，找到没有引入的模块并打上标记，将这些模块都给摇掉